# Date: 07/05

## File Upload:  


## ManyToMany && OneToMany:  
결과적으로 디비에서는 같은 모양을 가지지만 사용/만드는 방법은 완전히 다르다.  

파이널 프로젝트에 사용했던 방식은 너무 대책없이 만든 느낌이다. 좀 더 정리해서 깔끔하게 만들었음 좋았을듯.  

댓글과 첨부파일의 차이점:   
댓글을 글의 작성자 외에도 작성가능   
댓글은 좀 더 단독적이다. 스스로 작성, 수정, 삭제 가능   
첨부파일은 애초에 게시글 작성자만 붙일 수 있고, 수정이 사실 상 불가하다.   

##### 완전한 별개의 시스템으로 운용한다면 ManyToMany형 관계가 더 좋다는게 강사님 의견.
#### 다만, 이는 ManyToMany 어노테이션을 사용하라는 의미가 아니다!! 디비에서의 관계만을 의미한다.
두가지 해결 방법:  
1. OneToMany을 이용해 단방향 구현 가능:    
자동으로 중간다리 테이블이 생성되며 이를 이용해 해결  

2. MappedBy 속성을 걸어서 양방형으로 준 경우:  
조인테이블을 이용해 구현가능.(파이널 프로젝트에서 유저와 유저롤을 생각하면 된다.)   
즉, 한번의 ManyToMany로 구현하는게 아닌 중간에 조인 테이블에 OneToMany를 걸어서 해결.    

발생가능 한 문제:  
1. N+1 문제  
2. 읽어올때 연관관계 부제로 인한 오류  
3. 수정, 삭제시 Many의 문제   
 
#### @EntityGraph를 이용해 해결 가능   
   
하나의 엔티티로 다른 하나의 엔티티가 조절이 가능하다면 보통 @OneToMany 로 관리한다.   
Ex) Team and Player && File && Board.  

#### 강사님이 생각하시는 베스트 파일업로드 방식:  
1. 사용자가 파일을 업로드  
2. 임시 저장소에 원본+썸네일(Thumbnailator이용) 생성  
3. S3에 파일을 업로드   
4. 실제 DB에 저장  
5. 임시 저장소에 있는 파일들 삭제  

### JPA Join:
Join을 할 때 만약 그 해당 조인하는 객체가 샐렉트 하는 객체 안에 있다면 On이 필요 없이 그냥 조인이 가능하다.   


프로젝트 아이디어: 크롤링을 통해 리뷰를 모은후 NER등을 이용해 스포일러 걸르기.  



